<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEETPrepBuddy - Class 7-9 Foundation Builder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        /* ====== CSS RESET & BASE STYLES ====== */
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --success-color: #4cc9f0;
            --danger-color: #f72585;
            --warning-color: #f8961e;
            --info-color: #7209b7;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --gray-light: #e9ecef;
            --gray-medium: #adb5bd;
            --gray-dark: #495057;
            
            /* Light Theme Variables */
            --bg-color: #ffffff;
            --card-bg: #f8f9fa;
            --text-color: #212529;
            --border-color: #dee2e6;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --hover-bg: #f1f3f4;
            
            /* Subject Colors */
            --biology: #2ecc71;
            --physics: #3498db;
            --chemistry: #9b59b6;
            --maths: #e74c3c;
            --sst: #f39c12;
            --english: #1abc9c;
            --hindi: #e67e22;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #e6e6e6;
            --border-color: #2d4059;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --hover-bg: #2d4059;
            --gray-light: #2d4059;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ====== HEADER STYLES ====== */
        .main-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
        }

        .logo h1 {
            font-size: 1.5rem;
            margin: 0;
        }

        .logo span {
            color: var(--success-color);
            font-weight: 700;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .theme-toggle, .notification-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .theme-toggle:hover, .notification-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .streak-counter {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 20px;
        }

        .streak-counter i {
            color: #ffd700;
        }

        /* ====== NAVIGATION ====== */
        .main-nav {
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 70px;
            z-index: 999;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 20px;
            padding: 15px 0;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 15px;
            border-radius: 20px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: var(--primary-color);
            color: white;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* ====== MAIN CONTENT AREA ====== */
        .main-content {
            display: flex;
            min-height: calc(100vh - 140px);
        }

        .sidebar {
            width: 250px;
            background-color: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            position: sticky;
            top: 140px;
            height: calc(100vh - 140px);
            overflow-y: auto;
        }

        .content-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: calc(100vh - 140px);
        }

        /* ====== DASHBOARD STYLES ====== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-header h3 {
            font-size: 1.2rem;
            color: var(--text-color);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: var(--hover-bg);
            border-radius: 10px;
            transition: transform 0.3s;
        }

        .stat-item:hover {
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray-dark);
            margin-top: 5px;
        }

        .progress-section {
            margin-top: 30px;
        }

        .subject-progress {
            margin: 15px 0;
        }

        .subject-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .progress-bar {
            height: 10px;
            background-color: var(--gray-light);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        /* Subject-specific progress colors */
        .biology .progress-fill { background-color: var(--biology); }
        .physics .progress-fill { background-color: var(--physics); }
        .chemistry .progress-fill { background-color: var(--chemistry); }
        .maths .progress-fill { background-color: var(--maths); }
        .sst .progress-fill { background-color: var(--sst); }
        .english .progress-fill { background-color: var(--english); }
        .hindi .progress-fill { background-color: var(--hindi); }

        /* ====== TOPIC ROUTINE SYSTEM ====== */
        .routine-config {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .config-item {
            display: flex;
            flex-direction: column;
        }

        .config-item label {
            margin-bottom: 8px;
            font-weight: 500;
        }

        select, input {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }

        .btn-success {
            background-color: var(--success-color);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: white;
        }

        .routine-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .routine-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
        }

        .routine-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .routine-table tr:hover {
            background-color: var(--hover-bg);
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-not-started { background: var(--gray-light); color: var(--gray-dark); }
        .status-in-progress { background: #fff3cd; color: #856404; }
        .status-completed { background: #d4edda; color: #155724; }

        /* ====== TEST SYSTEM STYLES ====== */
        .test-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .test-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .test-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
        }

        .test-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .question-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid var(--border-color);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .options-grid {
            display: grid;
            gap: 10px;
            margin: 20px 0;
        }

        .option-item {
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-item:hover {
            border-color: var(--primary-color);
            background: var(--hover-bg);
        }

        .option-item.selected {
            border-color: var(--primary-color);
            background: rgba(67, 97, 238, 0.1);
        }

        .test-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        /* ====== RESULTS ANALYSIS ====== */
        .results-grid {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .score-card {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 12px;
        }

        .score {
            font-size: 4rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .grade {
            font-size: 1.5rem;
            color: #ffd700;
            margin: 10px 0;
        }

        .accuracy-meter {
            width: 150px;
            height: 150px;
            margin: 20px auto;
            position: relative;
        }

        .mistake-analysis {
            margin-top: 30px;
        }

        .mistake-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--hover-bg);
            border-radius: 8px;
            margin: 10px 0;
        }

        .chart-container {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        /* ====== MOBILE RESPONSIVENESS ====== */
        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
                order: 2;
            }
            
            .content-area {
                order: 1;
            }
            
            .nav-links {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .config-grid {
                grid-template-columns: 1fr;
            }
            
            .test-types {
                grid-template-columns: 1fr;
            }
            
            .routine-table {
                display: block;
                overflow-x: auto;
            }
        }

        /* ====== UTILITY CLASSES ====== */
        .hidden {
            display: none !important;
        }

        .visible {
            display: block !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .p-20 { padding: 20px; }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ====== PRINT STYLES ====== */
        @media print {
            .main-header,
            .main-nav,
            .sidebar,
            .test-controls,
            .btn {
                display: none !important;
            }
            
            .content-area {
                max-height: none;
                overflow: visible;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #000;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header class="main-header">
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-brain"></i>
                <h1>NEET<span>Prep</span>Buddy</h1>
            </div>
            <div class="header-controls">
                <div class="streak-counter">
                    <i class="fas fa-fire"></i>
                    <span id="streakCount">14</span> Days
                </div>
                <button class="notification-btn" id="notificationBtn">
                    <i class="fas fa-bell"></i>
                </button>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="container nav-container">
            <ul class="nav-links">
                <li><a href="#" class="active" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#" data-page="routine"><i class="fas fa-calendar-alt"></i> Study Routine</a></li>
                <li><a href="#" data-page="topics"><i class="fas fa-book"></i> Topics</a></li>
                <li><a href="#" data-page="tests"><i class="fas fa-clipboard-list"></i> Tests</a></li>
                <li><a href="#" data-page="progress"><i class="fas fa-chart-line"></i> Progress</a></li>
                <li><a href="#" data-page="reports"><i class="fas fa-file-alt"></i> Reports</a></li>
            </ul>
            <div class="user-profile">
                <div class="user-avatar">SK</div>
                <span>Student</span>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <div class="main-content">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="card">
                <h3>Quick Stats</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="completedTopics">24</div>
                        <div class="stat-label">Topics Completed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="accuracyRate">78%</div>
                        <div class="stat-label">Accuracy Rate</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="testsTaken">15</div>
                        <div class="stat-label">Tests Taken</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="studyHours">42</div>
                        <div class="stat-label">Study Hours</div>
                    </div>
                </div>
            </div>

            <div class="card mt-20">
                <h3>Today's Focus</h3>
                <div id="todayFocus">
                    <p>Photosynthesis - Biology</p>
                    <p>Motion - Physics</p>
                    <p>Acids & Bases - Chemistry</p>
                </div>
            </div>

            <div class="card mt-20">
                <h3>Upcoming Tests</h3>
                <div id="upcomingTests">
                    <p>Topic Test: Human Digestive System</p>
                    <p>Mixed Concept Test: Physics+Chemistry</p>
                </div>
            </div>

            <div class="card mt-20">
                <h3>Motivation</h3>
                <div id="motivationQuote">
                    "Success is the sum of small efforts, repeated day in and day out."
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="content-area">
            <!-- Dashboard Page (Default) -->
            <div id="dashboardPage" class="page">
                <h2>Dashboard Overview</h2>
                
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3>Today's Progress</h3>
                            <span class="status-badge status-in-progress">In Progress</span>
                        </div>
                        <div class="progress-section">
                            <div class="subject-progress biology">
                                <div class="subject-header">
                                    <span>Biology</span>
                                    <span>65%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 65%"></div>
                                </div>
                            </div>
                            <div class="subject-progress physics">
                                <div class="subject-header">
                                    <span>Physics</span>
                                    <span>45%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 45%"></div>
                                </div>
                            </div>
                            <div class="subject-progress chemistry">
                                <div class="subject-header">
                                    <span>Chemistry</span>
                                    <span>70%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 70%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Performance Summary</h3>
                        </div>
                        <canvas id="performanceChart" width="400" height="200"></canvas>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Recent Tests</h3>
                            <a href="#" data-page="tests" class="btn btn-primary btn-sm">View All</a>
                        </div>
                        <table class="routine-table">
                            <thead>
                                <tr>
                                    <th>Test</th>
                                    <th>Score</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="recentTestsTable">
                                <!-- Filled by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3>Weak Topics</h3>
                        </div>
                        <div id="weakTopicsList">
                            <!-- Filled by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="card mt-20">
                    <div class="card-header">
                        <h3>Study Timeline</h3>
                    </div>
                    <div id="studyTimeline">
                        <!-- Timeline will be generated here -->
                    </div>
                </div>
            </div>

            <!-- Study Routine Page -->
            <div id="routinePage" class="page hidden">
                <h2>Topic-by-Topic Study Routine</h2>
                
                <div class="routine-config">
                    <h3 style="color: white; margin-bottom: 20px;">Configure Your Study Plan</h3>
                    <div class="config-grid">
                        <div class="config-item">
                            <label for="classSelect">Class</label>
                            <select id="classSelect">
                                <option value="7">Class 7</option>
                                <option value="8" selected>Class 8</option>
                                <option value="9">Class 9</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label for="goalSelect">Goal</label>
                            <select id="goalSelect">
                                <option value="school">School Excellence</option>
                                <option value="neet" selected>NEET Preparation</option>
                                <option value="both">Both</option>
                            </select>
                        </div>
                        <div class="config-item">
                            <label for="studyHours">Daily Study Hours</label>
                            <input type="number" id="studyHoursInput" min="1" max="8" value="3">
                        </div>
                        <div class="config-item">
                            <label>&nbsp;</label>
                            <button class="btn btn-primary" id="generateRoutine">
                                <i class="fas fa-calendar-plus"></i> Generate Routine
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card mt-20">
                    <div class="card-header">
                        <h3>Weekly Study Schedule</h3>
                        <div>
                            <button class="btn btn-success" id="printRoutine">
                                <i class="fas fa-print"></i> Print
                            </button>
                            <button class="btn btn-primary" id="editRoutine">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </div>
                    </div>
                    <table class="routine-table">
                        <thead>
                            <tr>
                                <th>Day</th>
                                <th>Subject</th>
                                <th>Chapter</th>
                                <th>Topic</th>
                                <th>Time</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="routineTableBody">
                            <!-- Filled by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Topics Page -->
            <div id="topicsPage" class="page hidden">
                <h2>Topic-wise Learning Structure</h2>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Select Subject</h3>
                        <div class="subject-filter">
                            <button class="btn btn-primary btn-sm active" data-subject="all">All</button>
                            <button class="btn btn-primary btn-sm" data-subject="biology">Biology</button>
                            <button class="btn btn-primary btn-sm" data-subject="physics">Physics</button>
                            <button class="btn btn-primary btn-sm" data-subject="chemistry">Chemistry</button>
                            <button class="btn btn-primary btn-sm" data-subject="maths">Maths</button>
                        </div>
                    </div>
                    <div id="topicsAccordion">
                        <!-- Filled by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Tests Page -->
            <div id="testsPage" class="page hidden">
                <h2>Advanced Test System</h2>
                
                <div class="test-types">
                    <div class="test-card" data-test-type="topic">
                        <div class="test-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <h3>Topic Test</h3>
                        <p>Test on specific topics</p>
                        <button class="btn btn-primary mt-20 start-test">Start Test</button>
                    </div>
                    <div class="test-card" data-test-type="chapter">
                        <div class="test-icon">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3>Chapter Test</h3>
                        <p>Complete chapter assessment</p>
                        <button class="btn btn-primary mt-20 start-test">Start Test</button>
                    </div>
                    <div class="test-card" data-test-type="mixed">
                        <div class="test-icon">
                            <i class="fas fa-random"></i>
                        </div>
                        <h3>Mixed Concept</h3>
                        <p>Cross-topic questions</p>
                        <button class="btn btn-primary mt-20 start-test">Start Test</button>
                    </div>
                    <div class="test-card" data-test-type="thinking">
                        <div class="test-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>Thinking Test</h3>
                        <p>Logic & application</p>
                        <button class="btn btn-primary mt-20 start-test">Start Test</button>
                    </div>
                </div>

                <!-- Test Interface (Hidden by default) -->
                <div id="testInterface" class="hidden">
                    <div class="question-container">
                        <div class="question-header">
                            <h3 id="questionNumber">Question 1 of 10</h3>
                            <div class="timer" id="testTimer">30:00</div>
                        </div>
                        <div id="questionText">
                            Loading question...
                        </div>
                        <div class="options-grid" id="optionsContainer">
                            <!-- Options will be filled here -->
                        </div>
                    </div>
                    <div class="test-controls">
                        <button class="btn" id="prevQuestion">
                            <i class="fas fa-arrow-left"></i> Previous
                        </button>
                        <button class="btn btn-primary" id="nextQuestion">
                            Next <i class="fas fa-arrow-right"></i>
                        </button>
                        <button class="btn btn-danger" id="submitTest">
                            Submit Test
                        </button>
                    </div>
                </div>

                <!-- Previous Test Results -->
                <div class="card mt-20">
                    <div class="card-header">
                        <h3>Previous Test Results</h3>
                    </div>
                    <table class="routine-table">
                        <thead>
                            <tr>
                                <th>Test Type</th>
                                <th>Topic/Chapter</th>
                                <th>Score</th>
                                <th>Accuracy</th>
                                <th>Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="testResultsTable">
                            <!-- Filled by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Results Analysis Page -->
            <div id="resultsPage" class="page hidden">
                <div id="resultsContainer">
                    <!-- Results will be displayed here -->
                </div>
            </div>

            <!-- Progress Page -->
            <div id="progressPage" class="page hidden">
                <h2>Progress Analytics</h2>
                <div class="results-grid">
                    <div class="score-card">
                        <h3>Overall Progress</h3>
                        <div class="score">78%</div>
                        <div class="grade">Grade: A</div>
                        <div class="accuracy-meter">
                            <!-- Circular progress will be drawn here -->
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="progressChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>

            <!-- Reports Page -->
            <div id="reportsPage" class="page hidden">
                <h2>Detailed Reports</h2>
                <!-- Reports content -->
            </div>
        </main>
    </div>

    <!-- JavaScript -->
    <script>
        // ====== GLOBAL VARIABLES ======
        let currentPage = 'dashboard';
        let currentTest = null;
        let testQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = {};
        let testTimer = null;
        let timeLeft = 1800; // 30 minutes in seconds

        // ====== APPLICATION DATA ======
        const syllabus = {
            biology: [
                {
                    chapter: "Nutrition in Plants",
                    topics: [
                        { name: "Photosynthesis", time: 120, difficulty: "Medium", priority: "Core", completed: true },
                        { name: "Heterotrophic Nutrition", time: 90, difficulty: "Easy", priority: "Core", completed: false },
                        { name: "Saprotrophic Nutrition", time: 60, difficulty: "Easy", priority: "Support", completed: false }
                    ]
                },
                {
                    chapter: "Human Digestive System",
                    topics: [
                        { name: "Digestive Organs", time: 150, difficulty: "Medium", priority: "Core", completed: true },
                        { name: "Digestion Process", time: 180, difficulty: "Hard", priority: "Core", completed: false },
                        { name: "Enzymes in Digestion", time: 120, difficulty: "Medium", priority: "Core", completed: false }
                    ]
                }
            ],
            physics: [
                {
                    chapter: "Motion",
                    topics: [
                        { name: "Distance and Displacement", time: 90, difficulty: "Easy", priority: "Core", completed: true },
                        { name: "Speed and Velocity", time: 120, difficulty: "Medium", priority: "Core", completed: true },
                        { name: "Acceleration", time: 150, difficulty: "Medium", priority: "Core", completed: false }
                    ]
                }
            ],
            chemistry: [
                {
                    chapter: "Acids, Bases and Salts",
                    topics: [
                        { name: "Properties of Acids", time: 90, difficulty: "Easy", priority: "Core", completed: true },
                        { name: "Properties of Bases", time: 90, difficulty: "Easy", priority: "Core", completed: true },
                        { name: "pH Scale", time: 120, difficulty: "Medium", priority: "Core", completed: false }
                    ]
                }
            ]
        };

        const testData = [
            { type: "Topic Test", topic: "Photosynthesis", score: 85, accuracy: 90, date: "2024-01-15" },
            { type: "Chapter Test", topic: "Motion", score: 78, accuracy: 82, date: "2024-01-14" },
            { type: "Mixed Concept", topic: "Biology+Physics", score: 65, accuracy: 70, date: "2024-01-12" },
            { type: "Thinking Test", topic: "Logical Reasoning", score: 92, accuracy: 95, date: "2024-01-10" }
        ];

        const routineData = [
            { day: "Monday", subject: "Biology", chapter: "Nutrition in Plants", topic: "Photosynthesis", time: "4:00-5:00 PM", status: "completed" },
            { day: "Monday", subject: "Physics", chapter: "Motion", topic: "Speed and Velocity", time: "5:00-6:00 PM", status: "completed" },
            { day: "Tuesday", subject: "Chemistry", chapter: "Acids, Bases", topic: "pH Scale", time: "4:00-5:00 PM", status: "in-progress" },
            { day: "Tuesday", subject: "Biology", chapter: "Human Digestive", topic: "Digestion Process", time: "5:00-6:00 PM", status: "not-started" },
            { day: "Wednesday", subject: "Physics", chapter: "Motion", topic: "Acceleration", time: "4:00-5:00 PM", status: "not-started" }
        ];

        // ====== DOM ELEMENT REFERENCES ======
        const themeToggle = document.getElementById('themeToggle');
        const navLinks = document.querySelectorAll('.nav-links a');
        const pages = document.querySelectorAll('.page');
        const startTestButtons = document.querySelectorAll('.start-test');
        const generateRoutineBtn = document.getElementById('generateRoutine');
        const routineTableBody = document.getElementById('routineTableBody');
        const topicsAccordion = document.getElementById('topicsAccordion');
        const testResultsTable = document.getElementById('testResultsTable');
        const recentTestsTable = document.getElementById('recentTestsTable');
        const weakTopicsList = document.getElementById('weakTopicsList');

        // ====== THEME TOGGLE ======
        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', newTheme);
            themeToggle.innerHTML = newTheme === 'light' ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';
            
            // Save preference to localStorage
            localStorage.setItem('theme', newTheme);
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        themeToggle.innerHTML = savedTheme === 'light' ? '<i class="fas fa-moon"></i>' : '<i class="fas fa-sun"></i>';

        // ====== PAGE NAVIGATION ======
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const pageId = link.getAttribute('data-page');
                
                // Update active state
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Show selected page
                showPage(pageId);
            });
        });

        function showPage(pageId) {
            // Hide all pages
            pages.forEach(page => page.classList.add('hidden'));
            
            // Show selected page
            document.getElementById(`${pageId}Page`).classList.remove('hidden');
            currentPage = pageId;
            
            // Load page-specific data
            switch(pageId) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'routine':
                    loadRoutineData();
                    break;
                case 'topics':
                    loadTopicsData();
                    break;
                case 'tests':
                    loadTestsData();
                    break;
                case 'progress':
                    loadProgressData();
                    break;
            }
        }

        // ====== DASHBOARD FUNCTIONS ======
        function loadDashboardData() {
            // Update recent tests table
            updateRecentTestsTable();
            
            // Update weak topics
            updateWeakTopics();
            
            // Update study timeline
            updateStudyTimeline();
            
            // Initialize charts
            initializeCharts();
        }

        function updateRecentTestsTable() {
            const tableBody = recentTestsTable;
            tableBody.innerHTML = '';
            
            testData.slice(0, 3).forEach(test => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${test.type}</td>
                    <td>${test.score}/100</td>
                    <td>${test.date}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function updateWeakTopics() {
            const weakTopics = [
                "Motion - Acceleration",
                "Chemistry - pH Scale",
                "Biology - Heterotrophic Nutrition"
            ];
            
            weakTopicsList.innerHTML = '';
            weakTopics.forEach(topic => {
                const item = document.createElement('div');
                item.className = 'mistake-item';
                item.innerHTML = `
                    <i class="fas fa-exclamation-circle" style="color: var(--danger-color);"></i>
                    <span>${topic}</span>
                `;
                weakTopicsList.appendChild(item);
            });
        }

        function updateStudyTimeline() {
            const timeline = document.getElementById('studyTimeline');
            timeline.innerHTML = `
                <div style="display: flex; justify-content: space-between; padding: 20px;">
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--success-color);">24</div>
                        <div>Topics Completed</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);">42</div>
                        <div>Study Hours</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--info-color);">15</div>
                        <div>Tests Taken</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--warning-color);">78%</div>
                        <div>Accuracy Rate</div>
                    </div>
                </div>
            `;
        }

        function initializeCharts() {
            // Performance Chart
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            new Chart(performanceCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Test Scores',
                        data: [65, 70, 75, 78, 82, 85],
                        borderColor: 'var(--primary-color)',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // ====== ROUTINE FUNCTIONS ======
        function loadRoutineData() {
            routineTableBody.innerHTML = '';
            
            routineData.forEach(item => {
                const row = document.createElement('tr');
                const statusBadge = getStatusBadge(item.status);
                
                row.innerHTML = `
                    <td>${item.day}</td>
                    <td><span class="subject-badge ${item.subject.toLowerCase()}">${item.subject}</span></td>
                    <td>${item.chapter}</td>
                    <td>${item.topic}</td>
                    <td>${item.time}</td>
                    <td>${statusBadge}</td>
                    <td>
                        <button class="btn btn-sm" onclick="markAsStarted(this)" data-status="${item.status}">Start</button>
                        <button class="btn btn-success btn-sm" onclick="markAsCompleted(this)">âœ“</button>
                    </td>
                `;
                routineTableBody.appendChild(row);
            });
        }

        function getStatusBadge(status) {
            const statusMap = {
                'not-started': 'Not Started',
                'in-progress': 'In Progress',
                'completed': 'Completed'
            };
            
            const colorMap = {
                'not-started': 'status-not-started',
                'in-progress': 'status-in-progress',
                'completed': 'status-completed'
            };
            
            return `<span class="status-badge ${colorMap[status]}">${statusMap[status]}</span>`;
        }

        generateRoutineBtn.addEventListener('click', () => {
            const classLevel = document.getElementById('classSelect').value;
            const goal = document.getElementById('goalSelect').value;
            const hours = document.getElementById('studyHoursInput').value;
            
            alert(`Routine generated for Class ${classLevel} with ${goal} goal (${hours} hours/day)`);
            loadRoutineData();
        });

        window.markAsStarted = function(button) {
            const row = button.closest('tr');
            const statusCell = row.cells[5];
            statusCell.innerHTML = getStatusBadge('in-progress');
            button.setAttribute('data-status', 'in-progress');
        };

        window.markAsCompleted = function(button) {
            const row = button.closest('tr');
            const statusCell = row.cells[5];
            statusCell.innerHTML = getStatusBadge('completed');
            
            // Update stats
            const completedTopics = document.getElementById('completedTopics');
            completedTopics.textContent = parseInt(completedTopics.textContent) + 1;
        };

        // ====== TOPICS FUNCTIONS ======
        function loadTopicsData() {
            topicsAccordion.innerHTML = '';
            
            for (const [subject, chapters] of Object.entries(syllabus)) {
                const subjectCard = document.createElement('div');
                subjectCard.className = 'card mb-20';
                subjectCard.innerHTML = `
                    <div class="card-header">
                        <h3 style="text-transform: capitalize;">${subject}</h3>
                        <span class="status-badge status-in-progress">In Progress</span>
                    </div>
                    <div id="${subject}Chapters">
                        <!-- Chapters will be added here -->
                    </div>
                `;
                
                topicsAccordion.appendChild(subjectCard);
                
                const chaptersContainer = document.getElementById(`${subject}Chapters`);
                chapters.forEach(chapter => {
                    const chapterDiv = document.createElement('div');
                    chapterDiv.className = 'chapter-section';
                    chapterDiv.innerHTML = `
                        <h4 style="margin: 15px 0 10px 0; color: var(--primary-color);">${chapter.chapter}</h4>
                        <div class="topics-list" id="${subject}-${chapter.chapter.replace(/\s+/g, '-')}">
                            <!-- Topics will be added here -->
                        </div>
                    `;
                    chaptersContainer.appendChild(chapterDiv);
                    
                    const topicsList = document.getElementById(`${subject}-${chapter.chapter.replace(/\s+/g, '-')}`);
                    chapter.topics.forEach(topic => {
                        const topicDiv = document.createElement('div');
                        topicDiv.className = 'topic-item';
                        topicDiv.innerHTML = `
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 10px;">
                                <div>
                                    <strong>${topic.name}</strong>
                                    <div style="display: flex; gap: 10px; margin-top: 5px;">
                                        <span class="status-badge ${topic.completed ? 'status-completed' : 'status-not-started'}">
                                            ${topic.completed ? 'Completed' : 'Not Started'}
                                        </span>
                                        <span style="font-size: 0.9rem; color: var(--gray-medium);">
                                            <i class="fas fa-clock"></i> ${topic.time} min
                                        </span>
                                        <span style="font-size: 0.9rem; color: var(--gray-medium);">
                                            <i class="fas fa-chart-bar"></i> ${topic.difficulty}
                                        </span>
                                        <span style="font-size: 0.9rem; color: var(--gray-medium);">
                                            <i class="fas fa-flag"></i> ${topic.priority}
                                        </span>
                                    </div>
                                </div>
                                <button class="btn btn-primary btn-sm" onclick="startTopicTest('${subject}', '${chapter.chapter}', '${topic.name}')">
                                    <i class="fas fa-play"></i> Start
                                </button>
                            </div>
                        `;
                        topicsList.appendChild(topicDiv);
                    });
                });
            }
        }

        window.startTopicTest = function(subject, chapter, topic) {
            showPage('tests');
            // Simulate starting a topic test
            alert(`Starting ${topic} test in ${chapter} (${subject})`);
        };

        // ====== TEST SYSTEM FUNCTIONS ======
        function loadTestsData() {
            // Load test results table
            testResultsTable.innerHTML = '';
            
            testData.forEach(test => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${test.type}</td>
                    <td>${test.topic}</td>
                    <td><strong>${test.score}/100</strong></td>
                    <td>${test.accuracy}%</td>
                    <td>${test.date}</td>
                    <td>
                        <button class="btn btn-primary btn-sm" onclick="viewTestResults('${test.type}', '${test.topic}')">
                            <i class="fas fa-chart-bar"></i> View
                        </button>
                        <button class="btn btn-success btn-sm" onclick="retakeTest('${test.type}', '${test.topic}')">
                            <i class="fas fa-redo"></i> Retake
                        </button>
                    </td>
                `;
                testResultsTable.appendChild(row);
            });
        }

        startTestButtons.forEach(button => {
            button.addEventListener('click', function() {
                const testType = this.closest('.test-card').getAttribute('data-test-type');
                startTest(testType);
            });
        });

        function startTest(testType) {
            currentTest = testType;
            currentQuestionIndex = 0;
            userAnswers = {};
            
            // Hide test cards and show test interface
            document.querySelector('.test-types').classList.add('hidden');
            document.getElementById('testInterface').classList.remove('hidden');
            
            // Generate sample questions based on test type
            generateTestQuestions(testType);
            
            // Start timer
            startTimer();
            
            // Load first question
            loadQuestion();
        }

        function generateTestQuestions(testType) {
            testQuestions = [
                {
                    question: "Which organelle is responsible for photosynthesis in plant cells?",
                    options: ["Mitochondria", "Chloroplast", "Nucleus", "Ribosome"],
                    correctAnswer: 1,
                    type: "MCQ",
                    topic: "Biology - Photosynthesis",
                    explanation: "Chloroplast contains chlorophyll which captures light energy for photosynthesis."
                },
                {
                    question: "Assertion: All green plants perform photosynthesis. Reason: Photosynthesis requires chlorophyll which is present in green plants.",
                    options: [
                        "Both Assertion and Reason are true and Reason is the correct explanation",
                        "Both Assertion and Reason are true but Reason is not the correct explanation",
                        "Assertion is true but Reason is false",
                        "Both Assertion and Reason are false"
                    ],
                    correctAnswer: 0,
                    type: "Assertion-Reason",
                    topic: "Biology - Photosynthesis",
                    explanation: "Green plants contain chlorophyll which is essential for photosynthesis."
                },
                {
                    question: "A car travels 100 meters in 5 seconds. What is its speed in m/s?",
                    options: ["15 m/s", "20 m/s", "25 m/s", "30 m/s"],
                    correctAnswer: 1,
                    type: "Numerical",
                    topic: "Physics - Motion",
                    explanation: "Speed = Distance / Time = 100m / 5s = 20 m/s"
                }
            ];
        }

        function loadQuestion() {
            const question = testQuestions[currentQuestionIndex];
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1} of ${testQuestions.length}`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option-item';
                if (userAnswers[currentQuestionIndex] === index) {
                    optionDiv.classList.add('selected');
                }
                optionDiv.textContent = option;
                optionDiv.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionDiv);
            });
            
            // Update navigation buttons
            document.getElementById('prevQuestion').disabled = currentQuestionIndex === 0;
            document.getElementById('nextQuestion').textContent = 
                currentQuestionIndex === testQuestions.length - 1 ? 'Finish' : 'Next';
        }

        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            
            // Update UI
            const options = document.querySelectorAll('.option-item');
            options.forEach((option, index) => {
                option.classList.toggle('selected', index === optionIndex);
            });
        }

        document.getElementById('nextQuestion').addEventListener('click', () => {
            if (currentQuestionIndex < testQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                submitTest();
            }
        });

        document.getElementById('prevQuestion').addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        });

        function startTimer() {
            clearInterval(testTimer);
            timeLeft = 1800; // 30 minutes
            
            testTimer = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('testTimer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(testTimer);
                    submitTest();
                }
            }, 1000);
        }

        function submitTest() {
            clearInterval(testTimer);
            
            // Calculate score
            let score = 0;
            testQuestions.forEach((question, index) => {
                if (userAnswers[index] === question.correctAnswer) {
                    score++;
                }
            });
            
            const percentage = Math.round((score / testQuestions.length) * 100);
            
            // Show results
            showTestResults(score, percentage);
        }

        function showTestResults(score, percentage) {
            const resultsHTML = `
                <div class="results-grid">
                    <div class="score-card">
                        <h3>Test Results</h3>
                        <div class="score">${percentage}%</div>
                        <div class="grade">Grade: ${getGrade(percentage)}</div>
                        <div style="margin-top: 20px;">
                            <p>Correct: ${score}/${testQuestions.length}</p>
                            <p>Accuracy: ${percentage}%</p>
                            <p>Time Taken: 25:30</p>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Mistake Analysis</h3>
                        </div>
                        <div class="mistake-analysis">
                            <div class="mistake-item">
                                <i class="fas fa-brain" style="color: var(--danger-color);"></i>
                                <div>
                                    <strong>Conceptual Mistake</strong>
                                    <p>Photosynthesis process not clear</p>
                                </div>
                            </div>
                            <div class="mistake-item">
                                <i class="fas fa-calculator" style="color: var(--warning-color);"></i>
                                <div>
                                    <strong>Calculation Error</strong>
                                    <p>Unit conversion mistake in speed calculation</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Topic-wise Performance</h3>
                        </div>
                        <div id="topicPerformanceChart"></div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h3>Recommendations</h3>
                        </div>
                        <div>
                            <p>ðŸ“š <strong>Revise:</strong> Photosynthesis equations</p>
                            <p>ðŸŽ¯ <strong>Practice:</strong> Speed-distance-time problems</p>
                            <p>â° <strong>Schedule revision:</strong> Tomorrow at 6 PM</p>
                        </div>
                    </div>
                </div>
                
                <div class="test-controls" style="margin-top: 30px;">
                    <button class="btn btn-primary" onclick="retakeTest('${currentTest}', '')">
                        <i class="fas fa-redo"></i> Retake Test
                    </button>
                    <button class="btn btn-success" onclick="showPage('topics')">
                        <i class="fas fa-book"></i> Study Weak Topics
                    </button>
                    <button class="btn" onclick="printTestReport()">
                        <i class="fas fa-print"></i> Print Report
                    </button>
                </div>
            `;
            
            document.getElementById('testInterface').innerHTML = resultsHTML;
        }

        function getGrade(percentage) {
            if (percentage >= 90) return 'A+';
            if (percentage >= 80) return 'A';
            if (percentage >= 70) return 'B+';
            if (percentage >= 60) return 'B';
            if (percentage >= 50) return 'C';
            return 'F';
        }

        window.viewTestResults = function(testType, topic) {
            showPage('results');
            document.getElementById('resultsContainer').innerHTML = `
                <h2>Test Results: ${topic}</h2>
                <div class="score-card">
                    <h3>${testType}</h3>
                    <div class="score">85%</div>
                    <div class="grade">Grade: A</div>
                </div>
            `;
        };

        window.retakeTest = function(testType, topic) {
            startTest(testType);
        };

        window.printTestReport = function() {
            window.print();
        };

        // ====== PROGRESS FUNCTIONS ======
        function loadProgressData() {
            const progressCtx = document.getElementById('progressChart').getContext('2d');
            new Chart(progressCtx, {
                type: 'bar',
                data: {
                    labels: ['Biology', 'Physics', 'Chemistry', 'Maths', 'SST', 'English'],
                    datasets: [{
                        label: 'Completion %',
                        data: [65, 45, 70, 60, 80, 75],
                        backgroundColor: [
                            'var(--biology)',
                            'var(--physics)',
                            'var(--chemistry)',
                            'var(--maths)',
                            'var(--sst)',
                            'var(--english)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100
                        }
                    }
                }
            });
        }

        // ====== INITIALIZATION ======
        document.addEventListener('DOMContentLoaded', () => {
            // Load initial page
            showPage('dashboard');
            
            // Initialize all data
            loadDashboardData();
            loadRoutineData();
            loadTopicsData();
            loadTestsData();
            
            // Add subject badge styling
            const style = document.createElement('style');
            style.textContent = `
                .subject-badge {
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 0.85rem;
                    font-weight: 500;
                    color: white;
                }
                .subject-badge.biology { background-color: var(--biology); }
                .subject-badge.physics { background-color: var(--physics); }
                .subject-badge.chemistry { background-color: var(--chemistry); }
                .subject-badge.maths { background-color: var(--maths); }
                .subject-badge.sst { background-color: var(--sst); }
                .subject-badge.english { background-color: var(--english); }
                .subject-badge.hindi { background-color: var(--hindi); }
            `;
            document.head.appendChild(style);
            
            // Add notification functionality
            document.getElementById('notificationBtn').addEventListener('click', () => {
                alert("You have 3 new notifications:\n1. Test scheduled for tomorrow\n2. Weak topics need revision\n3. Study streak: 14 days!");
            });
            
            // Print routine button
            document.getElementById('printRoutine').addEventListener('click', () => {
                window.print();
            });
        });

        // ====== LOCAL STORAGE FUNCTIONS ======
        function saveProgress() {
            const progress = {
                completedTopics: document.getElementById('completedTopics').textContent,
                streak: document.getElementById('streakCount').textContent,
                lastStudyDate: new Date().toISOString()
            };
            localStorage.setItem('neetPrepBuddyProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('neetPrepBuddyProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                // Update UI with saved progress
            }
        }

        // Auto-save progress every 30 seconds
        setInterval(saveProgress, 30000);
    </script>
</body>
</html>
